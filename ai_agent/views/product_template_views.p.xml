<odoo>
    <record id="view_product_template_product_form" model="ir.ui.view">
        <field name="name">product.template.product.form</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">
            <header position="inside">
                <button string="Create LLMs"
                        type="object"
                        name="create_llm"
                           <!-- #if VERSION >= "17.0" -->
                           invisible="is_llm == False"
                            <!-- #elif VERSION <= "16.0" -->
                            attrs="{'invisible': [('is_llm', '==', False)]}"/>
                            <!-- #endif -->
                    />
            </header>
            <div name="options" position="inside">
                <span groups="ai_agent.group_ai_agent_developer,ai_agent.group_ai_agent_manager,ai_agent.group_ai_agent_supervisor" class="d-inline-block">
                    <field name="is_llm"/>
                    <label for="is_llm"/>
                </span>
            </div>

            <div name="button_box" position="inside">
                <button groups="ai_agent.group_ai_agent_developer,ai_agent.group_ai_agent_manager,ai_agent.group_ai_agent_supervisor" name="action_get_session_lines" class="oe_stat_button" type="object" icon="fa-money">
                    <field string="Tokens" name="session_line_count" widget="statinfo"/>
                </button>
            </div>




            <page name="inventory" position="after">
                <!-- #if VERSION >= "17.0" -->
                <page groups="ai_agent.group_ai_agent_developer,ai_agent.group_ai_agent_manager,ai_agent.group_ai_agent_supervisor" name="llm" string="LLM" invisible="not is_llm">
                <!-- #elif VERSION <= "16.0" -->
                <page groups="ai_agent.group_ai_agent_developer,ai_agent.group_ai_agent_manager,ai_agent.group_ai_agent_supervisor" name="llm" string="LLM" attrs="{'invisible':[('is_llm', '=', False)]}">
                <!-- #endif -->
                    <group groups="ai_agent.group_ai_agent_developer,ai_agent.group_ai_agent_manager,ai_agent.group_ai_agent_supervisor">
                        <group>
                            <field name="token_sys"/>
                            <field name="llm_additional_rate"/>
                            <field name="asr_library"/>
                            <field name="asr_type"/>
                        </group>
                        <group>
                            <field name="llm_library"/>
                            <field name="llm_type"/>
                            <field name="llm_etype"/>
                            <field name="llm_price_url" widget="url"/>
                            <field name="ai_api_key"/>
                            <!-- #if VERSION >= "17.0" -->
                            <field name="api_version" required="llm_type == 'AzureChatOpenAI'" invisible="llm_type != 'AzureChatOpenAI'"/>
                            <!-- #elif VERSION <= "16.0" -->
                            <field name="api_version" attrs="{'required': [('llm_type', '=', 'AzureChatOpenAI')], 'invisible': [('llm_type', '!=', 'AzureChatOpenAI')]}"/>
                            <!-- #endif -->
                        </group>
                    </group>

                </page>
            </page>
        </field>
    </record>

    <record id="action_product_template" model="ir.actions.act_window">
        <field name="name">AI Providers</field>
        <field name="res_model">product.template</field>
        <!-- #if VERSION >= "18.0" -->
        <field name="view_mode">list,form</field>
        <!-- #elif VERSION <= "17.0" -->
        <field name="view_mode">tree,form</field>
        <!-- #endif -->
        <field name="target">current</field>
        <field name="domain">[("is_llm", '=', True)]</field>
    </record>

    <menuitem id="ai_agent.menu_product_product" name="Providers" parent="ai_agent.menu_ai_agent_configuration" action="action_product_template" sequence="1"/>

 </odoo>
